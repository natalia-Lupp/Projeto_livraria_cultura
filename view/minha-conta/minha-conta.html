<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Livraria Cultura - Minha Conta</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../../css/minhaConta.css" />
    <link rel="stylesheet" href="../../css/style.css" />
  </head>
  <body>
    <div id="navbar-container" class="fixed-top w-100"></div>

    <div class="container my-4">
      <div class="d-flex align-items-center">
        <h2 class="mb-2 me-4 text-dark">Minha Conta</h2>
        <div class="flex-grow-1 border-top border-2"></div>
      </div>
    </div>

    <!--Corpo da Pagina-->
    <div class="container mt-3 border border-2 rounded shadow p-4">
      <div class="container mt-5">
        <div
          class="d-flex align-items-center justify-content-between flex-wrap"
        >
          <!-- Avatar + Nome -->
          <div class="d-flex align-items-center flex-shrink-0 me-5">
            <img
              src="https://randomuser.me/api/portraits/men/1.jpg"
              class="rounded-circle me-3 tm-img bg-secondary"
              alt="Usuário genérico"
            />
            <div class="d-flex flex-column justify-content-center">
              <span class="fw-medium fs-5 mb-0">Olá!</span>
              <span class="fw-medium fs-5 mb-0">usuario</span>
            </div>
          </div>

          <!-- Abas -->
          <ul class="nav nav-tabs flex-grow-1 border-0 ms-auto">
            <li class="nav-item" role="presentation">
              <a
                class="nav-link active text-muted"
                id="tab-dados-tab"
                data-bs-toggle="tab"
                href="#tab-dados"
                role="tab"
                aria-controls="tab-dados"
                aria-selected="true"
                >Dados pessoais</a
              >
            </li>
            <li class="nav-item" role="presentation">
              <a
                class="nav-link text-muted"
                id="tab-enderecos-tab"
                data-bs-toggle="modal"
                data-bs-target="#modalEnderecos"
                href="#"
                role="tab"
                aria-selected="false"
                >Endereços</a
              >
            </li>
            <li class="nav-item" role="presentation">
              <a
                class="nav-link text-muted"
                id="tab-auth-tab"
                data-bs-toggle="tab"
                href="#tab-auth"
                role="tab"
                aria-controls="tab-auth"
                aria-selected="false"
                >Autenticação</a
              >
            </li>
            <li class="nav-item" role="presentation">
              <a
                class="nav-link text-muted"
                id="tab-cartoes-tab"
                data-bs-toggle="tab"
                href="#tab-cartoes"
                role="tab"
                aria-controls="tab-cartoes"
                aria-selected="false"
                >Cartões</a
              >
            </li>
            <li class="nav-item" role="presentation">
              <a
                class="nav-link text-muted"
                id="tab-creditos-tab"
                data-bs-toggle="tab"
                href="#tab-creditos"
                role="tab"
                aria-controls="tab-creditos"
                aria-selected="false"
                >Meus Créditos</a
              >
            </li>
            <li class="nav-item" role="presentation">
              <a
                class="nav-link text-muted"
                id="tab-pedidos-tab"
                data-bs-toggle="tab"
                href="#tab-pedidos"
                role="tab"
                aria-controls="tab-pedidos"
                aria-selected="false"
                >Pedidos</a
              >
            </li>
            <li class="nav-item" role="presentation">
              <a class="nav-link text-muted" href="#" id="btn-sair">Sair</a>
            </li>
          </ul>
        </div>
      </div>
      <!--dados pessoais-->
      <div class="container my-5">
        <h2 class="mb-4 fw-bolder">Dados pessoais</h2>
        <div class="row">
          <div class="col-md-8">
            <div class="border border-2 rounded p-4">
              <div class="row g-3 fs-5 fw-medium">
                <div class="col-md-6">
                  <small class="text-dark fw-bold">Nome</small>
                  <p class="mb-0 small text-muted" id="exibir-nome">-</p>
                </div>
                <div class="col-md-6">
                  <small class="text-dark fw-bold">Sobrenome</small>
                  <p class="mb-0 small text-muted" id="exibir-sobrenome">-</p>
                </div>

                <div class="col-md-6">
                  <small class="text-dark fw-bold">Data de nascimento</small>
                  <p class="mb-0 small text-muted" id="exibir-nascimento">-</p>
                </div>
                <div class="col-md-6">
                  <small class="text-dark fw-bold">Gênero</small>
                  <p class="mb-0 small text-muted" id="exibir-genero">-</p>
                </div>

                <div class="col-md-6">
                  <small class="text-dark fw-bold">Email</small>
                  <p class="mb-0 small text-muted" id="exibir-email">-</p>
                </div>
                <div class="col-md-6">
                  <small class="text-dark fw-bold">Senha</small>
                  <p class="mb-0 small text-muted" id="exibir-senha">-</p>
                </div>
                <div class="col-md-6">
                  <small class="text-dark fw-bold">Telefone</small>
                  <p class="mb-0 small text-muted" id="exibir-telefone">-</p>
                </div>

                <div class="col-md-6">
                  <small class="text-dark fw-bold">CEP</small>
                  <p class="mb-0 small text-muted" id="exibir-cep">-</p>
                </div>
                <div class="col-md-6">
                  <small class="text-dark fw-bold">Cidade</small>
                  <p class="mb-0 small text-muted" id="exibir-cidade">-</p>
                </div>

                <div class="col-md-6">
                  <small class="text-dark fw-bold">Estado</small>
                  <p class="mb-0 small text-muted" id="exibir-estado">-</p>
                </div>
                <div class="col-md-6">
                  <small class="text-dark fw-bold">Endereço Principal</small>
                  <p class="mb-0 small text-muted" id="exibir-endereco">-</p>
                </div>
              </div>

              <!-- Botão alinhado à direita -->
              <div class="text-end mt-4">
                <a
                  href="#"
                  class="btn-outline-info btn-sm fw-bold small text-info rounded-pill"
                  data-bs-toggle="modal"
                  data-bs-target="#editarModal"
                  >EDITAR</a
                >
              </div>
            </div>
          </div>

          <!-- Newsletter continua à direita, FORA da borda -->
          <div class="col-md-4">
            <div class="border border-2 rounded p-3">
              <h6 class="text-muted">Newsletter</h6>
              <p class="small text-muted mb-2">
                Deseja receber e-mails com promoções?
              </p>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="newsletterCheck"
                />
                <label
                  class="form-check-label small text-secondary"
                  for="newsletterCheck"
                >
                  Quero receber e-mails com promoções.
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- modal de teste editar dados-->
      <div
        class="modal fade"
        id="editarModal"
        tabindex="-1"
        aria-labelledby="editarModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header border-0">
              <h5 class="modal-title fw-bold" id="editarModalLabel">
                Editar Dados Pessoais
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Fechar"
              ></button>
            </div>
            <div class="modal-body">
              <form>
                <div class="row g-3">
                  <div class="col-md-6">
                    <label for="nome" class="form-label">Nome</label>
                    <input type="text" class="form-control" id="nome" />
                  </div>
                  <div class="col-md-6">
                    <label for="sobrenome" class="form-label">Sobrenome</label>
                    <input type="text" class="form-control" id="sobrenome" />
                  </div>
                  <div class="col-md-6">
                    <label for="nascimento" class="form-label"
                      >Data de Nascimento</label
                    >
                    <input type="date" class="form-control" id="nascimento" />
                  </div>
                  <div class="col-md-6">
                    <label for="genero" class="form-label">Gênero</label>
                    <select id="genero" class="form-select">
                      <option selected>Selecione</option>
                      <option>Feminino</option>
                      <option>Masculino</option>
                      <option>Outro</option>
                    </select>
                  </div>
                  <div class="col-md-6">
                    <label for="email" class="form-label">Email</label>
                    <input type="email" class="form-control" id="email" />
                  </div>
                  <div class="col-md-6">
                    <label for="telefone" class="form-label">Telefone</label>
                    <input type="tel" class="form-control" id="telefone" />
                  </div>
                  <div class="col-md-4">
                    <label for="cep" class="form-label">CEP</label>
                    <input type="text" class="form-control" id="cep" />
                  </div>
                  <div class="col-md-4">
                    <label for="cidade" class="form-label">Cidade</label>
                    <input type="text" class="form-control" id="cidade" />
                  </div>
                  <div class="col-md-4">
                    <label for="estado" class="form-label">Estado</label>
                    <input type="text" class="form-control" id="estado" />
                  </div>
                  <div class="col-12">
                    <label for="endereco" class="form-label"
                      >Endereço Principal</label
                    >
                    <input type="text" class="form-control" id="endereco" />
                  </div>
                </div>
              </form>
            </div>
            <div class="modal-footer border-0">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Cancelar
              </button>
              <button
                type="submit"
                class="btn btn-info text-white"
                id="btn-salvar"
              >
                Salvar
              </button>
            </div>
          </div>
        </div>
      </div>

      <!--modal de teste endereço-->
      <div
        class="modal fade"
        id="modalEnderecos"
        tabindex="-1"
        aria-labelledby="modalEnderecosLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="modalEnderecosLabel">
                Gerenciar Endereços
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Fechar"
              ></button>
            </div>
            <div class="modal-body">
              <p class="small">
                Aqui você poderá visualizar e alterar seus endereços
                cadastrados.
              </p>
              <!-- Aqui você pode inserir um formulário ou lista de endereços -->
              <div class="mb-3">
                <label class="form-label">Endereço atual</label>
                <input
                  type="text"
                  class="form-control"
                  value="Rua Exemplo, 123"
                  disabled
                />
              </div>
              <div class="mb-3">
                <label class="form-label">Adicionar novo endereço</label>
                <input
                  type="text"
                  class="form-control"
                  placeholder="Digite seu novo endereço"
                />
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Fechar
              </button>
              <button type="button" class="btn btn-primary">Salvar</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="rodape-container"></div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../navbar.js"></script>
    <script src="../rodape.js"></script>
    <script>
      $(document).ready(function () {
        // Botão "Sair" no menu lateral
        $("#btn-sair").on("click", function (e) {
          localStorage.removeItem("isLoggedIn");
          localStorage.removeItem("nomeUsuario"); // se tiver salvo
          window.location.href = "../tela-inicial/tela-inicial.html";
        });
        /* $("#btn-sair").on("click", function (e) {
          localStorage.removeItem("isLoggedIn");
          window.locat */

        // Seletor de conta (dropdown superior)
        // $("#menuConta").on("change", function () {
        //   const valorSelecionado = $(this).val();
        //   if (valorSelecionado === "sair") {
        //     window.location.href = "../tela-inicial/tela-inicial.html";
        //   }
        // });

        // === EXIBIR EMAIL E SENHA SALVOS ===
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const email = urlParams.get("email");
        const dados = localStorage.getItem(email);

        if (dados) {
          const user = JSON.parse(dados);
          $("#exibir-email").text(user.email || "-");
          $("#exibir-senha").text(user.senha || "-");
        }
      });
    </script>
  </body>
</html>
